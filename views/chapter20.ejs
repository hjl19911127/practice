<!DOCTYPE html>
<html>
<head>
	<title><%= title %></title>
	<link rel="stylesheet" href="/highlight/styles/tomorrow-night.css">
	<link rel="stylesheet" href="/stylesheets/style.css">
	<script src='/highlight/highlight.pack.js'></script>
	<script src='/javascripts/EventUtil.js'></script>
	<style>
	.lower-alpha{
		padding-top: 20px;
		padding-bottom: 20px;
		border-radius: 5px;
		font-size: 14px;
		line-height: 2;
		background: #d9edf7;
		list-style-type: lower-alpha;
	}
	</style>
</head>
<body>
	<header>
		<h5>第20章 JSON</h5>
	</header>
	<main>
		<ol>
			<li>语法</li>
			<ol class="lower-alpha">
				<li>简单值：string（双引号）、number、boolean、null</li>
				<li>对象</li>
				<li>数组</li>
			</ol>
			<pre><code class="javascript">
			//属性名必须加双引号
			//同一个对象中不应该出现两个同名属性
			//没有末尾的分号
			{
				"name": "Nicholas",
				"age": 29,
				"school": {
					"name": "Merrimack College",
					"location": "North Andover, MA"
				},
				"book":[
				{
					"title": "Professional JavaScript",
					"authors": ["Nicholas C. Zakas"],
					"edition": 3,
					"year": 2011
				},
				{
					"title": "Professional JavaScript",
					"authors": ["Nicholas C. Zakas"],
					"edition": 2,
					"year": 2009
				}]
				
			}
			</code></pre>
			<li>解析与序列化</li>
			<ol class="lower-alpha">
				<li>JSON.stringfy(): 所有函数及原型成员都会被有意忽略，不体现在结果中。此外，值为undefined 的任何属性也都会被跳过</li>
				<li>JSON.parse():如果传给 JSON.parse()的字符串不是有效的 JSON，该方法会抛出错误</li>
			</ol>
			<ul>
				<li>JSON对象</li>
				<li>序列化选项(toJSON)</li>
				<pre><code class="javascript">
				var book = {
					title: 'Professional Javascript',
					author: ['Nicholas C. Zakas'],
					edition: 3,
					year: 2011
				}
				var jsonText = JSON.stringfy(book, ['title','edition']); //{"title":"Professional JavaScript","edition":3}
				var jsonText = JSON.stringify(book, function(key, value){
					switch(key){
						case 'authors':
							return value.join(',');
						case 'year':
							return 5000;
						case 'edition':
							return undefined;
						default: 
							return value;
					}
				}, 4); //字符缩进：最大缩进空格数为 10，所有大于 10 的值都会自动转换为 10；'--'

				var book = {
					title: 'Professional Javascript',
					author: ['Nicholas C. Zakas'],
					edition: 3,
					year: 2011,
					toJSON: function(){
						return this.title;
					}
				}
				var jsonText = JSON.stringify(book); //"Professional Javascript"
				</code></pre>
				<li>解析选项</li>
				<pre><code class="javascript">
				var book = {
					title: 'Professional Javascript',
					author: ['Nicholas C. Zakas'],
					edition: 3,
					year: 2011,
					releaseDate: new Date(2011,11,1)
				}
				var jsonText = JSON.stringify(book);
				var bookCopy = JSON.parse(jsonText, function(key, value){
					if(key === 'releaseDate'){
						return new Date(value);
					}else{
						return value;
					}
				});
				alert(bookCopy.releaseDate.getFullYear()); //2011
				</code></pre>
			</ul>
			
		</ol>
	</main>
	<script>
	hljs.initHighlightingOnLoad();
	</script>
</body>
</html>


     